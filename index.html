<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Support for Working with Janelia FlyEM Male VNC Dataset • malevnc</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Support for Working with Janelia FlyEM Male VNC Dataset">
<meta name="description" content="Provides support for analysis of the male Drosophila ventral nerve cord dataset released in June 2023 by the Janelia FlyEM team in collaboration with the Hess lab, Google and Drosophila Connectomics Group, Cambridge. This includes reading of connectivity information, skeleton and mesh representations of neurons and symmetrising and inter-template registrations.">
<meta property="og:description" content="Provides support for analysis of the male Drosophila ventral nerve cord dataset released in June 2023 by the Janelia FlyEM team in collaboration with the Hess lab, Google and Drosophila Connectomics Group, Cambridge. This includes reading of connectivity information, skeleton and mesh representations of neurons and symmetrising and inter-template registrations.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">malevnc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9100</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="SUPPORT.html">Help</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natverse/malevnc/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="malevnc">malevnc<a class="anchor" aria-label="anchor" href="#malevnc"></a>
</h1></div>
<p><img src="reference/figures/manc-render-phubbard-200h.png" align="right" height="200" alt="A rendering by Phil Hubbard (Janelia) of a sample of MANC neurons" title="MANC by P. Hubbard"></p>
<!-- badges: start -->

<p>The malevnc package provides a convenient natverse/neuprintr approach to analysing the Drosophila Male Adult Nerve Cord dataset (aka MANC). You can read more about the MANC dataset and find links to a range of data and tools at <a href="https://www.janelia.org/project-team/flyem/manc-connectome" class="external-link uri">https://www.janelia.org/project-team/flyem/manc-connectome</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of malevnc from github:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"natmanager"</span><span class="op">)</span></span>
<span><span class="fu">natmanager</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span>pkgs<span class="op">=</span><span class="st">"malevnc"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="dataset-options">Dataset options<a class="anchor" aria-label="anchor" href="#dataset-options"></a>
</h3>
<p>The package currently supports two distinct use cases / datasets</p>
<ol style="list-style-type: decimal">
<li>Access to the stable <code>MANC</code> connectome release for all general users</li>
<li>Access to an in progress <code>VNC</code> release for <a href="https://flyconnecto.me" class="external-link">flyconnectome</a> and collaborators who need to update annotations etc.</li>
</ol>
<p>Case 1 is now the default. If you usually need the second option then you must set</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>malevnc.dataset<span class="op">=</span><span class="st">'VNC'</span><span class="op">)</span></span></code></pre></div>
<p>in your <code>.Rprofile</code> e.g. by doing</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_profile</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can also make a temporary change in the middle of a session by doing one of:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">malevnc</span><span class="fu">:::</span><span class="fu"><a href="reference/choose_malevnc_dataset.html">choose_malevnc_dataset</a></span><span class="op">(</span><span class="st">'VNC'</span><span class="op">)</span></span>
<span><span class="fu">malevnc</span><span class="fu">:::</span><span class="fu"><a href="reference/choose_malevnc_dataset.html">choose_malevnc_dataset</a></span><span class="op">(</span><span class="st">'MANC'</span><span class="op">)</span></span></code></pre></div>
<p>The <code>malevnc:::</code> prefix is required because <code><a href="reference/choose_malevnc_dataset.html">choose_malevnc_dataset()</a></code> is currently a private function.</p>
</div>
<div class="section level3">
<h3 id="authentication---neuprint">Authentication - Neuprint<a class="anchor" aria-label="anchor" href="#authentication---neuprint"></a>
</h3>
<p>Access to neuprint requires authentication. See <a href="https://github.com/natverse/neuprintr#authentication" class="external-link uri">https://github.com/natverse/neuprintr#authentication</a> for details.</p>
<p>The recommendation is to set the <code>neuprint_token</code> environment variable, which is available after logging in to the neuprint website.</p>
</div>
<div class="section level3">
<h3 id="authentication---clio">Authentication - Clio<a class="anchor" aria-label="anchor" href="#authentication---clio"></a>
</h3>
<p>You only need to authenticate to the Clio API if you are interacting with the in progress pre-release dataset (<code>VNC</code>). You do this via a Google OAuth “dance” in your web browser. Note that the Clio and neuprint tokens look similar, but are <em>not</em> the same. Note also that the neuprint token appears to be indefinite while the Clio token currently lasts 3 weeks.</p>
</div>
<div class="section level3">
<h3 id="registrations">Registrations<a class="anchor" aria-label="anchor" href="#registrations"></a>
</h3>
<p>Running the symmetrising/bridging registrations currently depends on CMTK. To use these you will need a CMTK installation.</p>
<ul>
<li>For MacOS X use the dmg from <a href="https://www.nitrc.org/projects/cmtk/" class="external-link uri">https://www.nitrc.org/projects/cmtk/</a>
</li>
<li>For windows, I recommend Cygwin install. See <a href="https://natverse.org/nat/articles/Installation.html#cmtk-nat-on-windows" class="external-link uri">https://natverse.org/nat/articles/Installation.html#cmtk-nat-on-windows</a> for details.</li>
<li>For Linux I recommend compiling or using <a href="http://neuro.debian.net/pkgs/cmtk.html" class="external-link">neurodebian</a>.</li>
</ul>
<p>Check that the natverse has found CMTK like so:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nat</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/nat/man/cmtk.bindir.html" class="external-link">cmtk.bindir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">nat</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/nat/man/cmtk.dof2mat.html" class="external-link">cmtk.dof2mat</a></span><span class="op">(</span>version <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>You can check everything is working like so:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/natverse/nat" class="external-link">nat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/natverse/malevnc" class="external-link">malevnc</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dmurdoch.github.io/rgl/reference/plot3d.html" class="external-link">plot3d</a></span><span class="op">(</span><span class="va">MANC.surf</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dnmeta</span><span class="op">=</span><span class="fu"><a href="reference/manc_neuprint_meta.html">manc_neuprint_meta</a></span><span class="op">(</span><span class="st">"class:descending"</span><span class="op">)</span></span>
<span><span class="va">dnmeta</span></span></code></pre></div>
<p>To find out more, a quick tour round the <a href="https://natverse.org/malevnc/">documentation website</a></p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>We hope you find this package useful. If so, please can we trouble you for some citations. This is important to justify the funding for connectome generation and especially for continued development of the natverse and related tools:</p>
<p><strong>For the natverse and this package</strong>:</p>
<p>Alexander Shakeel Bates, James D Manton, Sridhar R Jagannathan, Marta Costa, Philipp Schlegel, Torsten Rohlfing, Gregory SXE Jefferis (2020) The natverse, a versatile toolbox for combining and analysing neuroanatomical data eLife 9:e53350 <a href="https://doi.org/10.7554/eLife.53350" class="external-link uri">https://doi.org/10.7554/eLife.53350</a></p>
<p><strong>For the MANC connectome (neuron morphologies, connectivity etc)</strong>:</p>
<p><em>A Connectome of the Male Drosophila Ventral Nerve Cord.</em> Shin-ya Takemura, Kenneth J Hayworth, Gary B Huang, Michal Januszewski, Zhiyuan Lu, Elizabeth C Marin, Stephan Preibisch, C Shan Xu, John Bogovic, Andrew S Champion, Han S J Cheong, Marta Costa, Katharina Eichler, William Katz, Christopher Knecht, Feng Li, Billy J Morris, Christopher Ordish, Patricia K Rivlin, Philipp Schlegel, Kazunori Shinomiya, Tomke Sturner, Ting Zhao, Griffin Badalamente, Dennis Bailey, Paul Brooks, Brandon S Canino, Jody Clements, Michael Cook, Octave Duclos, Christopher R Dunne, Kelli Fairbanks, Siqi Fang, Samantha Finley-May, Audrey Francis, Reed George, Marina Gkantia, Kyle Harrington, Gary Patrick Hopkins, Joseph Hsu, Philip M Hubbard, Alexandre Javier, Dagmar Kainmueller, Wyatt Korff, Julie Kovalyak, Dominik Krzeminski, Shirley A Lauchie, Alanna Lohff, Charli Maldonado, Emily A Manley, Caroline Mooney, Erika Neace, Matthew Nichols, Omotara Ogundeyi, Nneoma Okeoma, Tyler Paterson, Elliott Phillips, Emily M Phillips, Caitlin Ribeiro, Sean M Ryan, Jon Thomson Rymer, Anne K Scott, Ashley L Scott, David Shepherd, Aya Shinomiya, Claire Smith, Natalie Smith, Alia Suleiman, Satoko Takemura, Iris Talebi, Imaan F M Tamimi, Eric T Trautman, Lowell Umayam, John J Walsh, Tansy Yang, Gerald M Rubin, Louis K Scheffer, Jan Funke, Stephan Saalfeld, Harald F Hess, Stephen M Plaza, Gwyneth M Card, Gregory S X E Jefferis, Stuart Berg bioRxiv 2023.06.05.543757; doi: <a href="https://doi.org/10.1101/2023.06.05.543757" class="external-link uri">https://doi.org/10.1101/2023.06.05.543757</a></p>
<p><strong>For general annotations of the MANC connectome (cell classes, types etc)</strong>:</p>
<p><em>Systematic annotation of a complete adult male Drosophila nerve cord connectome reveals principles of functional organisation</em> Elizabeth C Marin, Billy J Morris, Tomke Stuerner, Andrew S Champion, Dominik Krzeminski, Griffin Badalamente, Marina Gkantia, Christopher R Dunne, Katharina Eichler, Shin-ya Takemura, Imaan F M Tamimi, Siqi Fang, Sung Soo Moon, Han S J Cheong, Feng Li, Philipp Schlegel, Stuart Berg, FlyEM Project Team, Gwyneth M Card, Marta Costa, David Shepherd, Gregory S X E Jefferis bioRxiv 2023.06.05.543407; doi: <a href="https://doi.org/10.1101/2023.06.05.543407" class="external-link uri">https://doi.org/10.1101/2023.06.05.543407</a></p>
<p><strong>For descending neuron or motor neuron cell types</strong>:</p>
<p><em>Transforming descending input into behavior: The organization of premotor circuits in the Drosophila Male Adult Nerve Cord connectome</em> Han S J Cheong, Katharina Eichler, Tomke Stuerner, Samuel K Asinof, Andrew S Champion, Elizabeth C Marin, Tess B Oram, Marissa Sumathipala, Lalanti Venkatasubramanian, Shigehiro Namiki, Igor Siwanowicz, Marta Costa, Stuart Berg, Janelia FlyEM Project Team, Gregory S X E Jefferis, Gwyneth M Card bioRxiv 2023.06.07.543976; doi: <a href="https://doi.org/10.1101/2023.06.07.543976" class="external-link uri">https://doi.org/10.1101/2023.06.07.543976</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/natverse/malevnc/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/natverse/malevnc/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing malevnc</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Gregory Jefferis <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0587-9355" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Dominik Krzeminski <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4568-0583" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/flyconnectome/malevnc/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/flyconnectome/malevnc/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://natverse.org/malevnc/reference/"><img src="https://img.shields.io/badge/docs-100%25-brightgreen.svg" alt="Docs"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gregory Jefferis, Dominik Krzeminski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
