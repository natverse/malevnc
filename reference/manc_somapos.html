<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Return the soma or root position of MANC bodyids — manc_somapos • malevnc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Return the soma or root position of MANC bodyids — manc_somapos"><meta name="description" content="manc_rootpos returns the root point of all neurons and is
  a convenience wrapper around manc_somapos."><meta property="og:description" content="manc_rootpos returns the root point of all neurons and is
  a convenience wrapper around manc_somapos."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">malevnc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../SUPPORT.html">Help</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natverse/malevnc/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Return the soma or root position of MANC bodyids</h1>
      <small class="dont-index">Source: <a href="https://github.com/natverse/malevnc/blob/master/R/soma.R" class="external-link"><code>R/soma.R</code></a></small>
      <div class="d-none name"><code>manc_somapos.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>manc_rootpos</code> returns the root point of all neurons and is
  a convenience wrapper around <code>manc_somapos</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">manc_somapos</span><span class="op">(</span></span>
<span>  ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="op">!</span><span class="va">details</span>,</span>
<span>  somatags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"soma"</span>, <span class="st">"tosoma"</span>, <span class="st">"root"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  node <span class="op">=</span> <span class="st">"neutu"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clio <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">manc_rootpos</span><span class="op">(</span></span>
<span>  ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="op">!</span><span class="va">details</span>,</span>
<span>  node <span class="op">=</span> <span class="st">"neutu"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clio <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ids">ids<a class="anchor" aria-label="anchor" href="#arg-ids"></a></dt>
<dd><p>MANC bodyids in any form compatible with <code><a href="manc_ids.html">manc_ids</a></code>.
The default <code>ids=NULL</code> returns the position of all known soma points.</p></dd>


<dt id="arg-details">details<a class="anchor" aria-label="anchor" href="#arg-details"></a></dt>
<dd><p>Whether to include details such as bodyids in the return.</p></dd>


<dt id="arg-duplicates">duplicates<a class="anchor" aria-label="anchor" href="#arg-duplicates"></a></dt>
<dd><p>Whether to include cases where the same bodyid has multiple
soma annotations. Default is to include duplicates when
<code>details=TRUE</code>.</p></dd>


<dt id="arg-somatags">somatags<a class="anchor" aria-label="anchor" href="#arg-somatags"></a></dt>
<dd><p>Which annotations to include. The default is to include both
<code>"soma"</code> and  <code>"tosoma"</code> tags (see details). <code>"all"</code> is an
alias for <code>c("soma", "tosoma", "root")</code>.</p></dd>


<dt id="arg-node">node<a class="anchor" aria-label="anchor" href="#arg-node"></a></dt>
<dd><p>The DVID node to use for XYZ to bodyid lookups. See
<code><a href="manc_xyz2bodyid.html">manc_xyz2bodyid</a></code>.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>whether to add a 5 min cache for the position lookups.</p></dd>


<dt id="arg-clio">clio<a class="anchor" aria-label="anchor" href="#arg-clio"></a></dt>
<dd><p>Whether to include point annotations from clio as well as the
contents of <code><a href="mancsomapos.html">mancsomapos</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>When <code>details=FALSE</code> an Nx3 matrix. When <code>TRUE</code>, a
  data.frame containing XYZ position, bodyid, source and tag</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Currently there are three sources of soma information, the
  <code><a href="mancsomapos.html">mancsomapos</a></code> data.frame distributed with the malevnc package,
  a key value annotation stored in DVID and and point annotations stored in
  Clio. Currently DVID is considered the main repository of information with
  updates to clio.</p>
<p>The <code><a href="mancsomapos.html">mancsomapos</a></code> data.frame was the result of initial
  annotation work principally by Chris Ordish at FlyEM who marked two points
  to define a sphere. It contains some cases where the midpoint between the
  two marked points does not land on the intended soma; there are also cases
  where the segmentation inside the soma is not contiguous e.g. because the
  nucleus is a separate body. These annotations were reviewed by FlyEM in
  June 2021 (see e.g.
  <a href="https://flyem-cns.slack.com/archives/G01FFQ00UAX/p1622732606077900?thread_ts=1622708364.074600&amp;cid=G01FFQ00UAX" class="external-link">Slack
   June 3rd</a> and
  <a href="https://flyem-cns.slack.com/archives/G01FFQ00UAX/p1623306812116500" class="external-link">Slack
   June 10th</a>).</p>
<p>Clio point annotations were added after predicting a set of objects without
  an annotated soma that might be intrinsic VNC neurons based on features
  such as pre- and post-synapse numbers, size, skeleton path length etc.
  These point annotation include "tosoma" positions not represented in DVID.</p>
<p></p><ul><li><p>soma tags are placed only on somata visible within the dataset</p></li>
<li><p>tosoma tags are placed on cell body fibres leading to the soma of an
  intrinsic neuron that may be missing (e.g. because of damage to the
  specimen or because of difficulty following the cell body fibre all the way
  to the soma due to segmentation issues.)</p></li>
<li><p>root tags are placed on a part of the neuron that is likely to be the
  closest part of the neuron to the soma within the image volume. Two example
  use cases are DNs or sensory neurons whose soma is outside the volume.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>supersedes <code><a href="mancsomapos.html">mancsomapos</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># just the XYZ position</span></span></span>
<span class="r-in"><span><span class="fu">manc_somapos</span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       X  Y  Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] NA NA NA</span>
<span class="r-in"><span><span class="co"># with details including data source</span></span></span>
<span class="r-in"><span><span class="fu">manc_somapos</span><span class="op">(</span><span class="fl">10000</span>, details<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bodyid  n  X  Y  Z source  tag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  10000 NA NA NA NA   &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gregory Jefferis, Dominik Krzeminski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

