<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Return the soma or root position of MANC bodyids — manc_somapos • malevnc</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Return the soma or root position of MANC bodyids — manc_somapos"><meta property="og:description" content="manc_rootpos returns the root point of all neurons and is
  a convenience wrapper around manc_somapos."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">malevnc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.github.io" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/flyconnectome/malevnc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Return the soma or root position of MANC bodyids</h1>
    <small class="dont-index">Source: <a href="https://github.com/flyconnectome/malevnc/blob/HEAD/R/soma.R" class="external-link"><code>R/soma.R</code></a></small>
    <div class="hidden name"><code>manc_somapos.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>manc_rootpos</code> returns the root point of all neurons and is
  a convenience wrapper around <code>manc_somapos</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">manc_somapos</span><span class="op">(</span></span>
<span>  ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="op">!</span><span class="va">details</span>,</span>
<span>  somatags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"soma"</span>, <span class="st">"tosoma"</span>, <span class="st">"root"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  node <span class="op">=</span> <span class="st">"neutu"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clio <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">manc_rootpos</span><span class="op">(</span></span>
<span>  ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="op">!</span><span class="va">details</span>,</span>
<span>  node <span class="op">=</span> <span class="st">"neutu"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  clio <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ids</dt>
<dd><p>MANC bodyids in any form compatible with <code><a href="manc_ids.html">manc_ids</a></code>.
The default <code>ids=NULL</code> returns the position of all known soma points.</p></dd>


<dt>details</dt>
<dd><p>Whether to include details such as bodyids in the return.</p></dd>


<dt>duplicates</dt>
<dd><p>Whether to include cases where the same bodyid has multiple
soma annotations. Default is to include duplicates when
<code>details=TRUE</code>.</p></dd>


<dt>somatags</dt>
<dd><p>Which annotations to include. The default is to include both
<code>"soma"</code> and  <code>"tosoma"</code> tags (see details). <code>"all"</code> is an
alias for <code>c("soma", "tosoma", "root")</code>.</p></dd>


<dt>node</dt>
<dd><p>The DVID node to use for XYZ to bodyid lookups. See
<code><a href="manc_xyz2bodyid.html">manc_xyz2bodyid</a></code>.</p></dd>


<dt>cache</dt>
<dd><p>whether to add a 5 min cache for the position lookups.</p></dd>


<dt>clio</dt>
<dd><p>Whether to include point annotations from clio as well as the
contents of <code><a href="mancsomapos.html">mancsomapos</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>When <code>details=FALSE</code> an Nx3 matrix. When <code>TRUE</code>, a
  data.frame containing XYZ position, bodyid, source and tag</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Currently there are three sources of soma information, the
  <code><a href="mancsomapos.html">mancsomapos</a></code> data.frame distributed with the malevnc package,
  a key value annotation stored in DVID and and point annotations stored in
  Clio. Currently DVID is considered the main repository of information with
  updates to clio.</p>
<p>The <code><a href="mancsomapos.html">mancsomapos</a></code> data.frame was the result of initial
  annotation work principally by Chris Ordish at FlyEM who marked two points
  to define a sphere. It contains some cases where the midpoint between the
  two marked points does not land on the intended soma; there are also cases
  where the segmentation inside the soma is not contiguous e.g. because the
  nucleus is a separate body. These annotations were reviewed by FlyEM in
  June 2021 (see e.g.
  <a href="https://flyem-cns.slack.com/archives/G01FFQ00UAX/p1622732606077900?thread_ts=1622708364.074600&amp;cid=G01FFQ00UAX" class="external-link">Slack
   June 3rd</a> and
  <a href="https://flyem-cns.slack.com/archives/G01FFQ00UAX/p1623306812116500" class="external-link">Slack
   June 10th</a>).</p>
<p>Clio point annotations were added after predicting a set of objects without
  an annotated soma that might be intrinsic VNC neurons based on features
  such as pre- and post-synapse numbers, size, skeleton path length etc.
  These point annotation include "tosoma" positions not represented in DVID.</p>
<p></p><ul><li><p>soma tags are placed only on somata visible within the dataset</p></li>
<li><p>tosoma tags are placed on cell body fibres leading to the soma of an
  intrinsic neuron that may be missing (e.g. because of damage to the
  specimen or because of difficulty following the cell body fibre all the way
  to the soma due to segmentation issues.)</p></li>
<li><p>root tags are placed on a part of the neuron that is likely to be the
  closest part of the neuron to the soma within the image volume. Two example
  use cases are DNs or sensory neurons whose soma is outside the volume.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>supersedes <code><a href="mancsomapos.html">mancsomapos</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># just the XYZ position</span></span></span>
<span class="r-in"><span><span class="fu">manc_somapos</span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       X  Y  Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] NA NA NA</span>
<span class="r-in"><span><span class="co"># with details including data source</span></span></span>
<span class="r-in"><span><span class="fu">manc_somapos</span><span class="op">(</span><span class="fl">10000</span>, details<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bodyid  n  X  Y  Z source  tag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  10000 NA NA NA NA   &lt;NA&gt; &lt;NA&gt;</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

